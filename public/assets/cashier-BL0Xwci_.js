import{e as B,p as c,M as I,z as V,a9 as z,m as O,o as n,h as o,k as s,V as u,_ as v,Y as y,X as P,$ as k,l as $,O as D,U as E,a8 as p}from"./vue-DkQzphiS.js";import{g as F}from"./pay-CU2cU_nZ.js";import{_ as T}from"./index-B0iOz79E.js";const U={key:0,class:"mobile-tips"},L={key:1,class:"cashier-page"},Q={class:"cashier-header"},R={class:"header-content"},X={key:0,class:"countdown"},Y={class:"time"},j={class:"cashier-content"},G={class:"content-wrapper"},H={class:"amount-section"},J={class:"amount-value"},K={class:"number"},W={class:"order-no"},Z={class:"payment-methods"},ss={class:"methods-list"},es=["onClick"],ts={class:"method-icon"},as=["src","alt"],ns={class:"method-name"},os={class:"method-select"},is={key:0,class:"payment-tips"},cs={class:"tips-content"},rs={key:0},ls={key:1},ds={class:"payment-action"},us=B({__name:"cashier",setup(ps){const _=c(!1),f=()=>{_.value=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},g=I(),b=c(""),m=c(0),h=c(""),w=c(0),a=c(""),d=c(300);let l=null;const M=c([{id:"wxpay",name:"微信支付",icon:"/src/assets/cashier/new_wx_pay.png"},{id:"alipay",name:"支付宝",icon:"/src/assets/cashier/zfb_pay.png"},{id:"quickpass",name:"银联快捷",icon:"/src/assets/cashier/quickpass_pay.png"},{id:"quick",name:"快捷支付",icon:"/src/assets/cashier/quick_pay.png"},{id:"bank",name:"网银支付",icon:"/src/assets/cashier/net_bank_pay.png"}]),x=t=>t.toFixed(2),C=t=>{const e=Math.floor(t/60),i=t%60;return`${String(e).padStart(2,"0")}:${String(i).padStart(2,"0")}`},S=t=>{a.value=t.id},N=async()=>{try{const t=g.query.uuid;if(!t){p.error("订单参数错误");return}const e=await F(t);if(e.code===1){const i=e.data;b.value=i.name,m.value=i.amount,h.value=i.order_no,w.value=i.create_time}else p.error(e.msg||"获取订单信息失败")}catch(t){console.error("加载订单数据失败:",t),p.error("加载订单数据失败")}},q=()=>{if(!a.value){p.warning("请选择支付方式");return}},A=()=>{l=setInterval(()=>{d.value>0?d.value--:l&&clearInterval(l)},1e3)};return V(()=>{f(),_.value||(N(),A())}),z(()=>{l&&clearInterval(l)}),(t,e)=>{const i=O("el-button");return _.value?(n(),o("div",U,e[0]||(e[0]=[s("div",{class:"tips-content"},[s("i",{class:"fa fa-desktop"}),s("p",null,"请使用电脑访问此页面"),s("p",{class:"sub-text"},"为了更好的支付体验，请使用电脑浏览器访问")],-1)]))):(n(),o("div",L,[s("div",Q,[s("div",R,[e[2]||(e[2]=s("div",{class:"title"},"收银台",-1)),d.value>0?(n(),o("div",X,[e[1]||(e[1]=s("span",{class:"label"},"支付剩余时间",-1)),s("span",Y,u(C(d.value)),1)])):v("",!0)])]),s("div",j,[s("div",G,[s("div",H,[s("div",J,[e[3]||(e[3]=s("span",{class:"currency"},"¥",-1)),s("span",K,u(x(m.value)),1)]),s("div",W,"订单编号："+u(h.value),1)]),s("div",Z,[s("div",ss,[(n(!0),o(y,null,P(M.value,r=>(n(),o("div",{key:r.id,class:k(["method-item",{active:a.value===r.id}]),onClick:_s=>S(r)},[s("div",ts,[s("img",{src:r.icon,alt:r.name},null,8,as)]),s("div",ns,u(r.name),1),s("div",os,[s("div",{class:k(["radio",{checked:a.value===r.id}])},null,2)])],10,es))),128))])]),a.value?(n(),o("div",is,[s("div",cs,[a.value==="wxpay"?(n(),o("p",rs,"使用微信App扫码完成支付")):a.value==="alipay"?(n(),o("p",ls,"使用支付宝App扫码完成支付")):a.value==="bank"?(n(),o(y,{key:2},[e[4]||(e[4]=s("p",null,"请选择网上银行进行支付",-1)),e[5]||(e[5]=s("p",{class:"sub-tips"},"企业网银支付需额外支付手续费",-1))],64)):v("",!0)])])):v("",!0),s("div",ds,[$(i,{type:"primary",size:"large",class:"pay-button",disabled:!a.value,onClick:q},{default:D(()=>e[6]||(e[6]=[E(" 立即支付 ")])),_:1},8,["disabled"])])])])]))}}}),ys=T(us,[["__scopeId","data-v-9de6b5ea"]]);export{ys as default};
