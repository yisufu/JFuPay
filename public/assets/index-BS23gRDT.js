import{e as E,u as Se,S as ae,H as ce,I as Te,_ as z,x as ye,m as H,l as ge,h as X,J as Be,i as re,K as tt,y as Oe,L as oe,M as ot,N as lt,v as We,O as Le,g as at,f as Fe,P as xe,r as Ke,Q as ze,R as nt,T as je,U as st,V as rt}from"./index-B0iOz79E.js";import{u as Me,t as F}from"./terminal-DX-ZxcvF.js";import{e as I,ab as j,m as p,o as c,h as R,v as e,_ as $,j as ne,V as w,N as x,$ as N,X as se,Y as W,O as n,l,k as f,H as ut,M as le,a as K,f as Re,z as J,a1 as ie,n as Y,A as De,Z as O,ad as Xe,ae as Ve,af as ct,a0 as Ye,p as _e,a7 as ue,U as A,W as Pe,ag as it,ah as Ne,a8 as dt,ai as $e,aj as Je,a9 as mt,B as ft,ak as pt,i as Ee}from"./vue-DkQzphiS.js";import{_ as _t,D as vt}from"./darkSwitch-CvLiTjG4.js";import{c as yt,g as ee,o as He,a as Ae,r as ve,s as gt,b as bt}from"./router-CW6Sc17-.js";import{I as ht}from"./index-CJwZD0Ka.js";import{t as Ct}from"./useDark-PbmN5N1b.js";import{a as kt,i as wt}from"./index-DxVJWVq8.js";import{F as fe}from"./index-tQazVPhs.js";import"./index-DJv0ClnV.js";const xt={class:"layout-logo"},Tt={key:0,class:"logo-img",src:_t,alt:"logo"},St=I({__name:"logo",setup(T){j(i=>({adf9ae48:e(t).layout.layoutMode!="Streamline"?e(t).getColorVal("menuTopBarBackground"):"transparent"}));const t=E(),o=Se(),u=function(){t.layout.shrink&&!t.layout.menuCollapse&&yt(),t.setLayout("menuCollapse",!t.layout.menuCollapse),ae.set(ce,{layoutMode:t.layout.layoutMode,menuCollapse:t.layout.menuCollapse}),setTimeout(()=>{Te()},350)};return(i,s)=>{const g=p("Icon");return c(),R("div",xt,[e(t).layout.menuCollapse?$("",!0):(c(),R("img",Tt)),e(t).layout.menuCollapse?$("",!0):(c(),R("div",{key:1,style:ne({color:e(t).getColorVal("menuActiveColor")}),class:"website-name"},w(e(o).siteName),5)),e(t).layout.layoutMode!="Streamline"?(c(),x(g,{key:2,onClick:u,name:e(t).layout.menuCollapse?"fa fa-indent":"fa fa-dedent",class:N([e(t).layout.menuCollapse?"unfold":"","fold"]),color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["name","class","color"])):$("",!0)])}}}),Ze=z(St,[["__scopeId","data-v-38fd2478"]]),Bt=I({__name:"menuTree",props:{menus:{default:()=>[]},extends:{default:()=>({level:1})}},setup(T){j(s=>({"3a8d44ae":e(o).getColorVal("menuActiveBackground")}));const{t}=ye.useI18n(),o=E(),u=T,i=s=>{var g,d;if(((g=u.extends)==null?void 0:g.position)=="horizontal"&&u.extends.level<=1&&((d=s.children)!=null&&d.length)){const r=Ae(s.children);r?He(r):ut({type:"error",message:t("utils.No child menu to jump to!")})}};return(s,g)=>{const d=p("Icon"),r=p("menu-tree",!0),v=p("el-sub-menu"),y=p("el-menu-item");return c(!0),R(W,null,se(u.menus,m=>(c(),R(W,null,[m.children&&m.children.length>0?(c(),x(v,{onClick:a=>i(m),index:e(ee)(m),key:e(ee)(m)},{title:n(()=>{var a,b,M,_;return[l(d,{color:e(o).getColorVal("menuColor"),name:(a=m.meta)!=null&&a.icon?(b=m.meta)==null?void 0:b.icon:e(o).layout.menuDefaultIcon},null,8,["color","name"]),f("span",null,w((M=m.meta)!=null&&M.title?(_=m.meta)==null?void 0:_.title:s.$t("noTitle")),1)]}),default:n(()=>[l(r,{extends:{...u.extends,level:u.extends.level+1},menus:m.children},null,8,["extends","menus"])]),_:2},1032,["onClick","index"])):(c(),x(y,{onClick:a=>e(He)(m),index:e(ee)(m),key:e(ee)(m)},{default:n(()=>{var a,b,M,_;return[l(d,{color:e(o).getColorVal("menuColor"),name:(a=m.meta)!=null&&a.icon?(b=m.meta)==null?void 0:b.icon:e(o).layout.menuDefaultIcon},null,8,["color","name"]),f("span",null,w((M=m.meta)!=null&&M.title?(_=m.meta)==null?void 0:_.title:s.$t("noTitle")),1)]}),_:2},1032,["onClick","index"]))],64))),256)}}}),be=z(Bt,[["__scopeId","data-v-cddda623"]]),Mt=I({__name:"menuVertical",setup(T){j(r=>({"76d2e33a":s.value,"4a79107e":e(t).getColorVal("menuBackground"),"64c0459e":e(t).getColorVal("menuColor"),"3e529690":e(t).getColorVal("menuActiveColor")}));const t=E(),o=H(),u=le(),i=K({defaultActive:""}),s=Re(()=>{let r=0;return t.layout.menuShowTopBar&&(r=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+r)+"px)":"calc(100vh - "+r+"px)"}),g=r=>{const v=o.getTabsViewDataByRoute(r);v&&(i.defaultActive=ee(v,v.meta.matched))},d=()=>{Y(()=>{var v;let r=document.querySelector(".el-menu.layouts-menu-vertical li.is-active");if(!r)return!1;(v=X.value)==null||v.setScrollTop(r.offsetTop)})};return J(()=>{g(u),d()}),ie(r=>{g(r)}),(r,v)=>{const y=p("el-menu"),m=p("el-scrollbar");return c(),x(m,{ref_key:"layoutMenuScrollbarRef",ref:X,class:"vertical-menus-scrollbar"},{default:n(()=>[l(y,{class:"layouts-menu-vertical","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":i.defaultActive,collapse:e(t).layout.menuCollapse,ref_key:"layoutMenuRef",ref:ge},{default:n(()=>[l(be,{menus:e(o).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}}),Rt=I({__name:"menuVerticalChildren",setup(T){j(r=>({"20a77cc6":s.value,"6c5bc54d":e(t).getColorVal("menuBackground"),"7f8e9edc":e(t).getColorVal("menuColor"),fb6fcea8:e(t).getColorVal("menuActiveColor")}));const t=E(),o=H(),u=le(),i=K({defaultActive:"",routeChildren:[]}),s=Re(()=>{let r=0;return t.layout.menuShowTopBar&&(r=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+r)+"px)":"calc(100vh - "+r+"px)"}),g=r=>{const v=o.getTabsViewDataByRoute(r);v&&(i.defaultActive=ee(v,v.meta.matched));let y=o.getTabsViewDataByRoute(r,"above");y?y.children&&y.children.length>0?i.routeChildren=y.children:i.routeChildren=[y]:i.routeChildren||(i.routeChildren=o.state.tabsViewRoutes)},d=()=>{Y(()=>{var v;let r=document.querySelector(".el-menu.layouts-menu-vertical-children li.is-active");if(!r)return!1;(v=X.value)==null||v.setScrollTop(r.offsetTop)})};return J(()=>{g(u),d(),new Be(X.value.wrapRef)}),ie(r=>{g(r)}),(r,v)=>{const y=p("el-menu"),m=p("el-scrollbar");return c(),x(m,{ref_key:"layoutMenuScrollbarRef",ref:X,class:"children-vertical-menus-scrollbar"},{default:n(()=>[l(y,{class:"layouts-menu-vertical-children","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":i.defaultActive,collapse:e(t).layout.menuCollapse,ref_key:"layoutMenuRef",ref:ge},{default:n(()=>[i.routeChildren.length>0?(c(),x(be,{key:0,menus:i.routeChildren},null,8,["menus"])):$("",!0)]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}}),Vt=I({name:"layout/aside",__name:"aside",setup(T){j(i=>({"12d2a223":u.value}));const t=E(),o=H(),u=Re(()=>t.menuWidth());return(i,s)=>{const g=p("el-aside");return e(o).state.tabFullScreen?$("",!0):(c(),x(g,{key:0,class:N("layout-aside-"+e(t).layout.layoutMode+" "+(e(t).layout.shrink?"shrink":""))},{default:n(()=>[e(t).layout.menuShowTopBar?(c(),x(Ze,{key:0})):$("",!0),e(t).layout.layoutMode=="Double"?(c(),x(Rt,{key:1})):(c(),x(Mt,{key:2}))]),_:1},8,["class"]))}}}),Ie=z(Vt,[["__scopeId","data-v-be977e32"]]);function Ge(){if(!De())throw new Error("useCurrentInstance() can only be used inside setup() or functional components!");const{appContext:T}=De();return{proxy:T.config.globalProperties}}const $t={class:"el-dropdown-menu"},At=["onClick"],It=I({__name:"index",props:{width:{default:150},items:{default:()=>[]}},emits:["menuClick","hideContextmenu"],setup(T,{expose:t,emit:o}){const u=T,i=o,s=K({show:!1,axis:{x:0,y:0},sourceData:null,showArrow:!0,arrowAxis:10}),g=(v,y)=>{s.showArrow=!0,s.sourceData=v;const m=document.documentElement.clientHeight-y.y-(u.items.length*40+20),a=document.documentElement.clientWidth-y.x-(u.width+20);m<0&&(y.y+=m,s.showArrow=!1),a<0&&(y.x+=a,s.showArrow=!1),s.axis=y,s.show=!0},d=()=>{s.show=!1,i("hideContextmenu")},r=v=>{v.disabled||(v.sourceData=ct(s.sourceData),i("menuClick",v))};return t({onShowContextmenu:g,onHideContextmenu:d}),J(()=>{re(document,"click",d),re(document,"scroll",d),re(document,"keydown",v=>{v.key==="Escape"&&d()})}),(v,y)=>{const m=p("Icon");return c(),x(Ve,{name:"el-zoom-in-center"},{default:n(()=>[O((c(),R("div",{class:"el-popper is-pure is-light el-dropdown__popper ba-contextmenu",style:ne(`top: ${s.axis.y+5}px;left: ${s.axis.x-14}px;width:${u.width}px`),key:Math.random(),"aria-hidden":"false","data-popper-placement":"bottom"},[f("ul",$t,[(c(!0),R(W,null,se(u.items,(a,b)=>(c(),R("li",{key:b,class:N(["el-dropdown-menu__item",a.disabled?"is-disabled":""]),tabindex:"-1",onClick:M=>r(a)},[l(m,{size:"12",name:a.icon},null,8,["name"]),f("span",null,w(a.label),1)],10,At))),128))]),s.showArrow?(c(),R("span",{key:0,class:"el-popper__arrow",style:ne({left:`${s.arrowAxis}px`})},null,4)):$("",!0)],4)),[[Xe,s.show]])]),_:1})}}}),Lt=z(It,[["__scopeId","data-v-0380e8de"]]),Ft=["onClick","onContextmenu"],zt=I({__name:"tabs",setup(T,{expose:t}){j(h=>({"6f2fd06e":e(i).getColorVal("headerBarTabColor"),"6a84faa3":e(i).getColorVal("headerBarTabActiveColor"),"5a2975ba":e(i).layout.layoutMode=="Default"?"none":e(i).getColorVal("headerBarBackground")}));const o=le(),u=Ye(),i=E(),s=H(),{proxy:g}=Ge(),d=_e(),r=tt(),v=_e(),y=K({contextmenuItems:[{name:"refresh",label:"重新加载",icon:"fa fa-refresh"},{name:"close",label:"关闭标签",icon:"fa fa-times"},{name:"fullScreen",label:"当前标签全屏",icon:"el-icon-FullScreen"},{name:"closeOther",label:"关闭其他标签",icon:"fa fa-minus"},{name:"closeAll",label:"关闭全部标签",icon:"fa fa-stop"}]}),m=K({width:"0",transform:"translateX(0px)"}),a=h=>{u.push(h.fullPath)},b=function(h){if(!h)return!1;m.width=h.clientWidth+"px",m.transform=`translateX(${h.offsetLeft}px)`;let B=h.offsetLeft+h.clientWidth-d.value.clientWidth;h.offsetLeft<d.value.scrollLeft?d.value.scrollTo(h.offsetLeft,0):B>d.value.scrollLeft&&d.value.scrollTo(B,0)},M=()=>{const h=s.state.tabsView.slice(-1)[0];h?u.push(h.fullPath):u.push(Oe)},_=h=>{var B;s._closeTab(h),g.eventBus.emit("onTabViewClose",h),((B=s.state.activeRoute)==null?void 0:B.fullPath)===h.fullPath?M():(s._setActiveRoute(s.state.activeRoute),Y(()=>{b(r.value[s.state.activeIndex])})),v.value.onHideContextmenu()},V=h=>{var B;s._closeTabs(h),s._setActiveRoute(h),((B=s.state.activeRoute)==null?void 0:B.fullPath)!==o.fullPath&&u.push(h.fullPath)},L=h=>{var S;let B=Ae(s.state.tabsViewRoutes);if(h&&B&&B.path==h.fullPath)return V(h);if(B&&B.path==((S=s.state.activeRoute)==null?void 0:S.fullPath))return V(s.state.activeRoute);s._closeTabs(!1),B&&ve(B.path)},G=(h,B)=>{y.contextmenuItems[0].disabled=o.fullPath!==h.fullPath,y.contextmenuItems[4].disabled=y.contextmenuItems[3].disabled=s.state.tabsView.length==1;const{clientX:S,clientY:D}=B;v.value.onShowContextmenu(h,{x:S,y:D})},P=h=>{const{name:B,sourceData:S}=h;if(S)switch(B){case"refresh":g.eventBus.emit("onTabViewRefresh",S);break;case"close":_(S);break;case"closeOther":V(S);break;case"closeAll":L(S);break;case"fullScreen":o.fullPath!==S.fullPath&&u.push(S.fullPath),s.setFullScreen(!0);break}},q=function(h){s._addTab(h),s._setActiveRoute(h),Y(()=>{b(r.value[s.state.activeIndex])})};return ie(async h=>{q(h)}),J(()=>{q(u.currentRoute.value),new Be(d.value)}),t({closeAllTab:L,closeTabByPath:h=>{for(const B in s.state.tabsView)if(s.state.tabsView[B].fullPath==h){_(s.state.tabsView[B]);break}},updateTabTitle:(h,B)=>{s._updateTabTitle(h,B),Y(()=>{b(r.value[s.state.activeIndex])})}}),(h,B)=>{const S=p("Icon");return c(),R("div",{class:"nav-tabs",ref_key:"tabScrollbarRef",ref:d},[(c(!0),R(W,null,se(e(s).state.tabsView,(D,k)=>(c(),R("div",{onClick:C=>a(D),onContextmenu:ue(C=>G(D,C),["prevent"]),class:N(["ba-nav-tab",e(s).state.activeIndex==k?"active":""]),ref_for:!0,ref:e(r).set,key:k},[A(w(D.meta.title)+" ",1),l(Ve,{onAfterLeave:B[0]||(B[0]=C=>b(e(r)[e(s).state.activeIndex])),name:"el-fade-in"},{default:n(()=>[O(l(S,{class:"close-icon",onClick:ue(C=>_(D),["stop"]),size:"15",name:"el-icon-Close"},null,8,["onClick"]),[[Xe,e(s).state.tabsView.length>1]])]),_:2},1024)],42,Ft))),128)),f("div",{style:ne(m),class:"nav-tabs-active-box"},null,4),l(Lt,{ref_key:"contextmenuRef",ref:v,items:y.contextmenuItems,onMenuClick:P},null,8,["items"])],512)}}}),Qe=z(zt,[["__scopeId","data-v-a252f3cb"]]),qe=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Z=(()=>{if(typeof document>"u")return!1;const T=qe[0],t={};for(const o of qe)if((o==null?void 0:o[1])in document){for(const[i,s]of o.entries())t[T[i]]=s;return t}return!1})(),Ue={change:Z.fullscreenchange,error:Z.fullscreenerror};let U={request(T=document.documentElement,t){return new Promise((o,u)=>{const i=()=>{U.off("change",i),o()};U.on("change",i);const s=T[Z.requestFullscreen](t);s instanceof Promise&&s.then(i).catch(u)})},exit(){return new Promise((T,t)=>{if(!U.isFullscreen){T();return}const o=()=>{U.off("change",o),T()};U.on("change",o);const u=document[Z.exitFullscreen]();u instanceof Promise&&u.then(o).catch(t)})},toggle(T,t){return U.isFullscreen?U.exit():U.request(T,t)},onchange(T){U.on("change",T)},onerror(T){U.on("error",T)},on(T,t){const o=Ue[T];o&&document.addEventListener(o,t,!1)},off(T,t){const o=Ue[T];o&&document.removeEventListener(o,t,!1)},raw:Z};Object.defineProperties(U,{isFullscreen:{get:()=>!!document[Z.fullscreenElement]},element:{enumerable:!0,get:()=>document[Z.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[Z.fullscreenEnabled]}});Z||(U={isEnabled:!1});const pe=U,Dt={class:"layout-config-drawer"},Pt={class:"layout-mode-styles-box"},Nt={class:"layout-mode-box-style"},Et={class:"layout-mode-style-name"},Ht={class:"layout-mode-style-name"},qt={class:"layout-mode-style-name"},Ut={class:"layout-mode-style-name"},Ot={class:"layout-config-global"},Wt={class:"layout-config-aside"},Kt={class:"layout-config-aside"},jt={class:"ba-center"},Xt=I({__name:"config",setup(T){const{t}=ye.useI18n(),o=E(),u=H(),i=Ye(),s=(m,a)=>{o.setLayout(a,m)},g=(m,a)=>{if(m===null)return;const b=o.layout[a];o.layout.isDark?b[1]=m:b[0]=m,o.setLayout(a,b)},d=m=>{ae.set(ce,{layoutMode:m,menuCollapse:o.layout.menuCollapse}),o.setLayoutMode(m)},r=(m,a)=>{o.setLayout(a,m);const b=u.state.tabsViewRoutes;u.setTabsViewRoutes([]),Y(()=>{u.setTabsViewRoutes(b)})},v=()=>{o.setLayout("showDrawer",!1)},y=()=>{oe.remove(ot),ae.remove(ce),i.go(0)};return(m,a)=>{const b=p("el-divider"),M=p("el-col"),_=p("el-row"),V=p("el-form-item"),L=p("el-option"),G=p("el-select"),P=p("el-color-picker"),q=p("el-switch"),Q=p("el-input"),te=p("el-button"),h=p("el-popconfirm"),B=p("el-form"),S=p("el-scrollbar"),D=p("el-drawer");return c(),R("div",Dt,[l(D,{"model-value":e(o).layout.showDrawer,title:e(t)("layouts.Layout configuration"),size:"310px",onClose:v},{default:n(()=>[l(S,{class:"layout-mode-style-scrollbar"},{default:n(()=>[l(B,{ref:"formRef",model:e(o).layout},{default:n(()=>[f("div",Pt,[l(b,{"border-style":"dashed"},{default:n(()=>[A(w(e(t)("layouts.Layout mode")),1)]),_:1}),f("div",Nt,[l(_,{class:"layout-mode-box-style-row",gutter:10},{default:n(()=>[l(M,{span:12},{default:n(()=>[f("div",{onClick:a[0]||(a[0]=k=>d("Default")),class:N(["layout-mode-style default",e(o).layout.layoutMode=="Default"?"active":""])},[a[21]||(a[21]=f("div",{class:"layout-mode-style-box"},[f("div",{class:"layout-mode-style-aside"}),f("div",{class:"layout-mode-style-container-box"},[f("div",{class:"layout-mode-style-header"}),f("div",{class:"layout-mode-style-container"})])],-1)),f("div",Et,w(e(t)("layouts.default")),1)],2)]),_:1}),l(M,{span:12},{default:n(()=>[f("div",{onClick:a[1]||(a[1]=k=>d("Classic")),class:N(["layout-mode-style classic",e(o).layout.layoutMode=="Classic"?"active":""])},[a[22]||(a[22]=f("div",{class:"layout-mode-style-box"},[f("div",{class:"layout-mode-style-aside"}),f("div",{class:"layout-mode-style-container-box"},[f("div",{class:"layout-mode-style-header"}),f("div",{class:"layout-mode-style-container"})])],-1)),f("div",Ht,w(e(t)("layouts.classic")),1)],2)]),_:1})]),_:1}),l(_,{gutter:10},{default:n(()=>[l(M,{span:12},{default:n(()=>[f("div",{onClick:a[2]||(a[2]=k=>d("Streamline")),class:N(["layout-mode-style streamline",e(o).layout.layoutMode=="Streamline"?"active":""])},[a[23]||(a[23]=f("div",{class:"layout-mode-style-box"},[f("div",{class:"layout-mode-style-container-box"},[f("div",{class:"layout-mode-style-header"}),f("div",{class:"layout-mode-style-container"})])],-1)),f("div",qt,w(e(t)("layouts.Single column")),1)],2)]),_:1}),l(M,{span:12},{default:n(()=>[f("div",{onClick:a[3]||(a[3]=k=>d("Double")),class:N(["layout-mode-style double",e(o).layout.layoutMode=="Double"?"active":""])},[a[24]||(a[24]=f("div",{class:"layout-mode-style-box"},[f("div",{class:"layout-mode-style-aside"}),f("div",{class:"layout-mode-style-container-box"},[f("div",{class:"layout-mode-style-header"}),f("div",{class:"layout-mode-style-container"})])],-1)),f("div",Ut,w(e(t)("layouts.Double column")),1)],2)]),_:1})]),_:1})]),l(b,{"border-style":"dashed"},{default:n(()=>[A(w(e(t)("layouts.overall situation")),1)]),_:1}),f("div",Ot,[l(V,{size:"large",label:e(t)("layouts.Dark mode")},{default:n(()=>[l(vt,{onClick:a[4]||(a[4]=k=>e(Ct)())})]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Background page switching animation")},{default:n(()=>[l(G,{onChange:a[5]||(a[5]=k=>s(k,"mainAnimation")),"model-value":e(o).layout.mainAnimation,placeholder:e(t)("layouts.Please select an animation name")},{default:n(()=>[l(L,{label:"slide-right",value:"slide-right"}),l(L,{label:"slide-left",value:"slide-left"}),l(L,{label:"el-fade-in-linear",value:"el-fade-in-linear"}),l(L,{label:"el-fade-in",value:"el-fade-in"}),l(L,{label:"el-zoom-in-center",value:"el-zoom-in-center"}),l(L,{label:"el-zoom-in-top",value:"el-zoom-in-top"}),l(L,{label:"el-zoom-in-bottom",value:"el-zoom-in-bottom"})]),_:1},8,["model-value","placeholder"])]),_:1},8,["label"])]),l(b,{"border-style":"dashed"},{default:n(()=>[A(w(e(t)("layouts.sidebar")),1)]),_:1}),f("div",Wt,[l(V,{label:e(t)("layouts.Side menu bar background color")},{default:n(()=>[l(P,{onChange:a[6]||(a[6]=k=>g(k,"menuBackground")),"model-value":e(o).getColorVal("menuBackground")},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Side menu text color")},{default:n(()=>[l(P,{onChange:a[7]||(a[7]=k=>g(k,"menuColor")),"model-value":e(o).getColorVal("menuColor")},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Side menu active item background color")},{default:n(()=>[l(P,{onChange:a[8]||(a[8]=k=>g(k,"menuActiveBackground")),"model-value":e(o).getColorVal("menuActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Side menu active item text color")},{default:n(()=>[l(P,{onChange:a[9]||(a[9]=k=>g(k,"menuActiveColor")),"model-value":e(o).getColorVal("menuActiveColor")},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Show side menu top bar (logo bar)")},{default:n(()=>[l(q,{onChange:a[10]||(a[10]=k=>s(k,"menuShowTopBar")),"model-value":e(o).layout.menuShowTopBar},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Side menu top bar background color")},{default:n(()=>[l(P,{onChange:a[11]||(a[11]=k=>g(k,"menuTopBarBackground")),"model-value":e(o).getColorVal("menuTopBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Side menu width (when expanded)")},{default:n(()=>[l(Q,{onInput:a[12]||(a[12]=k=>s(k,"menuWidth")),type:"number",step:10,"model-value":e(o).layout.menuWidth},{append:n(()=>a[25]||(a[25]=[A("px")])),_:1},8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Side menu default icon")},{default:n(()=>[l(ht,{onChange:a[13]||(a[13]=k=>r(k,"menuDefaultIcon")),"model-value":e(o).layout.menuDefaultIcon},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Side menu horizontal collapse")},{default:n(()=>[l(q,{onChange:a[14]||(a[14]=k=>s(k,"menuCollapse")),"model-value":e(o).layout.menuCollapse},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Side menu accordion")},{default:n(()=>[l(q,{onChange:a[15]||(a[15]=k=>s(k,"menuUniqueOpened")),"model-value":e(o).layout.menuUniqueOpened},null,8,["model-value"])]),_:1},8,["label"])]),l(b,{"border-style":"dashed"},{default:n(()=>[A(w(e(t)("layouts.Top bar")),1)]),_:1}),f("div",Kt,[l(V,{label:e(t)("layouts.Top bar background color")},{default:n(()=>[l(P,{onChange:a[16]||(a[16]=k=>g(k,"headerBarBackground")),"model-value":e(o).getColorVal("headerBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Top bar text color")},{default:n(()=>[l(P,{onChange:a[17]||(a[17]=k=>g(k,"headerBarTabColor")),"model-value":e(o).getColorVal("headerBarTabColor")},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Background color when hovering over the top bar")},{default:n(()=>[l(P,{onChange:a[18]||(a[18]=k=>g(k,"headerBarHoverBackground")),"model-value":e(o).getColorVal("headerBarHoverBackground")},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Top bar menu active item background color")},{default:n(()=>[l(P,{onChange:a[19]||(a[19]=k=>g(k,"headerBarTabActiveBackground")),"model-value":e(o).getColorVal("headerBarTabActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Top bar menu active item text color")},{default:n(()=>[l(P,{onChange:a[20]||(a[20]=k=>g(k,"headerBarTabActiveColor")),"model-value":e(o).getColorVal("headerBarTabActiveColor")},null,8,["model-value"])]),_:1},8,["label"])]),l(h,{onConfirm:y,title:e(t)("layouts.Are you sure you want to restore all configurations to the default values?")},{reference:n(()=>[f("div",jt,[l(te,{class:"w80",type:"info"},{default:n(()=>[A(w(e(t)("layouts.Restore default")),1)]),_:1})])]),_:1},8,["title"])])]),_:1},8,["model"])]),_:1})]),_:1},8,["model-value","title"])])}}}),Yt=z(Xt,[["__scopeId","data-v-64de73d3"]]),Jt={class:"command"},Zt={class:"task-opt"},Gt=["onClick"],Qt={class:"terminal-buttons"},eo={class:"config-buttons"},to=I({__name:"index",setup(T){const{t}=ye.useI18n(),o=Me(),u=_e(),i=K({registryLoading:!1,registryLoadingType:"npm",packageManagerLoading:!1}),s=m=>{let a=t("terminal.unknown"),b="info";switch(m){case F.Waiting:a=t("terminal.Waiting for execution"),b="info";break;case F.Connecting:a=t("terminal.Connecting"),b="warning";break;case F.Executing:a=t("terminal.Executing"),b="warning";break;case F.Success:a=t("terminal.Successful execution"),b="success";break;case F.Failed:a=t("terminal.Execution failed"),b="danger";break;case F.Unknown:a=t("terminal.Unknown execution result"),b="danger";break}return{statusText:a,statusType:b}},g=(m,a,b=!0,M="",_=()=>{})=>{a?o.addTaskPM(m,b,M,_):o.addTask(m,b,M,_),Y(()=>{u.value&&u.value.wrapRef&&u.value.setScrollTop(u.value.wrapRef.scrollHeight)})},d=()=>{Ne.confirm(t("terminal.Are you sure you want to republish?"),t("Reminder"),{confirmButtonText:t("Confirm"),cancelButtonText:t("Cancel"),type:"warning"}).then(()=>{g("web-build",!0,!0,"",()=>{})})},r=m=>{i.packageManagerLoading=!0,lt({manager:m}).then(a=>{a.code==1&&o.changePackageManager(m)}).finally(()=>{i.packageManagerLoading=!1})},v=(m,a)=>{const b=a=="npm"?o.state.npmRegistry:o.state.composerRegistry;o.changeRegistry(m,a),i.registryLoading=!0,i.registryLoadingType=a,o.addTask(`set-${a}-registry.${m}`,!1,"",M=>{i.registryLoading=!1,(M==F.Failed||M==F.Unknown)&&Ne.confirm(t("terminal.Failed to modify the source command, Please try again manually"),t("Reminder"),{confirmButtonText:t("Confirm"),showCancelButton:!1,type:"warning"}).then(()=>{o.changeRegistry(b,a)})})},y=m=>{let a={};return m=="npm"?a={npm:"npm",taobao:"taobao",tencent:"tencent"}:m=="composer"&&(a={composer:"composer",huawei:"huawei",aliyun:"aliyun",tencent:"tencent",kkame:"kkame"}),o.state[m=="npm"?"npmRegistry":"composerRegistry"]=="unknown"&&(a.unknown=t("Unknown")),a};return J(()=>{o.init()}),(m,a)=>{const b=p("el-alert"),M=p("el-tag"),_=p("el-button"),V=p("Icon"),L=p("el-card"),G=p("el-timeline-item"),P=p("el-timeline"),q=p("el-empty"),Q=p("el-dropdown-item"),te=p("el-dropdown-menu"),h=p("el-dropdown"),B=p("el-dialog"),S=p("el-form"),D=Pe("blur"),k=Pe("loading");return c(),R("div",null,[l(B,{modelValue:e(o).state.show,"onUpdate:modelValue":a[6]||(a[6]=C=>e(o).state.show=C),title:e(t)("terminal.Terminal"),class:"ba-terminal-dialog main-dialog"},{default:n(()=>[l(e(it),{ref_key:"terminalScrollbarRef",ref:u,"max-height":500,class:"terminal-scrollbar"},{default:n(()=>[e(o).state.phpDevelopmentServer?$("",!0):(c(),x(b,{key:0,class:"terminal-warning-alert",title:e(t)("terminal.The current terminal is not running under the installation service, and some commands may not be executed"),type:"error"},null,8,["title"])),e(o).state.taskList.length?(c(),x(P,{key:1,class:"terminal-timeline"},{default:n(()=>[(c(!0),R(W,null,se(e(o).state.taskList,(C,de)=>(c(),x(G,{key:de,class:N(["task-item","task-status-"+C.status]),type:s(C.status).statusType,center:"",timestamp:C.createTime,placement:"top"},{default:n(()=>[l(L,null,{default:n(()=>[f("div",null,[l(M,{type:s(C.status).statusType},{default:n(()=>[A(w(s(C.status).statusText),1)]),_:2},1032,["type"]),(C.status==e(F).Failed||C.status==e(F).Unknown)&&C.blockOnFailure?(c(),x(M,{key:0,class:"block-on-failure-tag",type:"warning"},{default:n(()=>[A(w(e(t)("terminal.Failure to execute this command will block the execution of the queue")),1)]),_:1})):$("",!0),C.status==e(F).Executing||C.status==e(F).Connecting?(c(),x(M,{key:1,class:"block-on-failure-tag",type:"danger"},{default:n(()=>[A(w(e(t)("terminal.Do not refresh the browser")),1)]),_:1})):$("",!0),f("span",Jt,w(C.command),1),f("div",Zt,[C.status==e(F).Failed||C.status==e(F).Unknown?O((c(),x(_,{key:0,title:e(t)("Retry"),size:"small",type:"warning",icon:"el-icon-RefreshRight",circle:"",onClick:me=>e(o).retryTask(de)},null,8,["title","onClick"])),[[D]]):$("",!0),O(l(_,{onClick:me=>e(o).delTask(de),title:e(t)("Delete"),size:"small",type:"danger",icon:"el-icon-Delete",circle:""},null,8,["onClick","title"]),[[D]])])]),C.status!=e(F).Waiting?(c(),R(W,{key:0},[C.status!=e(F).Connecting&&C.status!=e(F).Executing?(c(),R("div",{key:0,onClick:me=>e(o).setTaskShowMessage(de),class:"toggle-message-display"},[f("span",null,w(e(t)("terminal.Command run log")),1),l(V,{name:C.showMessage?"el-icon-ArrowUp":"el-icon-ArrowDown",size:"16",color:"#909399"},null,8,["name"])],8,Gt)):$("",!0),C.status==e(F).Connecting||C.status==e(F).Executing||C.status>e(F).Executing&&C.showMessage?(c(),R("div",{key:1,class:N(["exec-message","exec-message-"+C.uuid])},[(c(!0),R(W,null,se(C.message,(me,et)=>(c(),R("pre",{key:et,class:"message-item"},w(me),1))),128))],2)):$("",!0)],64)):$("",!0)]),_:2},1024)]),_:2},1032,["class","type","timestamp"]))),128))]),_:1})):(c(),x(q,{key:2,"image-size":80,description:e(t)("terminal.No mission yet")},null,8,["description"]))]),_:1},512),f("div",Qt,[O((c(),x(_,{class:"terminal-menu-item",icon:"el-icon-MagicStick",onClick:a[0]||(a[0]=C=>g("test",!0,!1))},{default:n(()=>[A(w(e(t)("terminal.Test command")),1)]),_:1})),[[D]]),l(h,{class:"terminal-menu-item"},{dropdown:n(()=>[l(te,null,{default:n(()=>[e(o).state.packageManager!="none"?(c(),x(Q,{key:0,onClick:a[1]||(a[1]=C=>g("web-install",!0))},{default:n(()=>[A(w(e(o).state.packageManager)+" run install ",1)]),_:1})):$("",!0),l(Q,{onClick:a[2]||(a[2]=C=>g("composer.update",!1))},{default:n(()=>a[9]||(a[9]=[A("composer update")])),_:1})]),_:1})]),default:n(()=>[O((c(),x(_,{icon:"el-icon-Download"},{default:n(()=>[A(w(e(t)("terminal.Install dependent packages")),1)]),_:1})),[[D]])]),_:1}),O((c(),x(_,{class:"terminal-menu-item",icon:"el-icon-Sell",onClick:a[3]||(a[3]=C=>d())},{default:n(()=>[A(w(e(t)("terminal.Republish")),1)]),_:1})),[[D]]),O((c(),x(_,{class:"terminal-menu-item",icon:"el-icon-Delete",onClick:a[4]||(a[4]=C=>e(o).clearSuccessTask())},{default:n(()=>[A(w(e(t)("terminal.Clean up task list")),1)]),_:1})),[[D]]),O((c(),x(_,{class:"terminal-menu-item",icon:"el-icon-Tools",onClick:a[5]||(a[5]=C=>e(o).toggleConfigDialog())},{default:n(()=>[A(w(e(t)("terminal.Terminal settings")),1)]),_:1})),[[D]])])]),_:1},8,["modelValue","title"]),l(B,{onClose:a[8]||(a[8]=C=>e(o).toggleConfigDialog(!1)),"model-value":e(o).state.showConfig,class:"ba-terminal-dialog",title:e(t)("terminal.Terminal settings")},{default:n(()=>[l(S,{"label-position":"left","label-width":"140"},{default:n(()=>[O((c(),x(fe,{label:"NPM "+e(t)("terminal.Source"),"model-value":e(o).state.npmRegistry,key:e(o).state.npmRegistry,type:"select","input-attr":{border:!0,content:y("npm"),teleported:!1,onChange:C=>v(C,"npm")}},null,8,["label","model-value","input-attr"])),[[k,i.registryLoading&&i.registryLoadingType=="npm"]]),O((c(),x(fe,{label:"Composer "+e(t)("terminal.Source"),"model-value":e(o).state.composerRegistry,key:e(o).state.composerRegistry,type:"select","input-attr":{border:!0,content:y("composer"),teleported:!1,onChange:C=>v(C,"composer")}},null,8,["label","model-value","input-attr"])),[[k,i.registryLoading&&i.registryLoadingType=="composer"]]),O(l(fe,{label:e(t)("terminal.NPM package manager"),"model-value":e(o).state.packageManager,type:"select","input-attr":{border:!0,content:{npm:"NPM",cnpm:"CNPM",pnpm:"PNPM",yarn:"YARN",ni:"NI",none:e(t)("terminal.Manual execution")},teleported:!1,onChange:C=>r(C)},tip:e(t)("terminal.NPM package manager tip")},null,8,["label","model-value","input-attr","tip"]),[[k,i.packageManagerLoading]]),l(fe,{label:e(t)("terminal.Clear successful task"),"model-value":e(o).state.automaticCleanupTask,type:"radio","input-attr":{border:!0,content:{0:e(t)("Disable"),1:e(t)("Enable")},onChange:e(o).changeAutomaticCleanupTask},tip:e(t)("terminal.Clear successful task tip")},null,8,["label","model-value","input-attr","tip"])]),_:1}),f("div",eo,[l(_,{onClick:a[7]||(a[7]=C=>e(o).toggleConfigDialog(!1))},{default:n(()=>[A(w(e(t)("terminal.Back to terminal")),1)]),_:1})])]),_:1},8,["model-value","title"])])}}}),oo=z(to,[["__scopeId","data-v-3d8b491f"]]),lo={class:"el-popover__title"},ao={class:"reload-hot-server-content"},no={class:"reload-hot-server-buttons"},so={class:"nav-menu-item"},ro={class:"admin-name"},uo={class:"admin-info-base"},co={class:"admin-info-other"},io={class:"admin-info-name"},mo={class:"admin-info-lasttime"},fo={class:"admin-info-footer"},po=I({__name:"navMenus",setup(T){j(M=>({"5ca3095c":e(u).getColorVal("headerBarBackground"),"14fceebc":e(u).getColorVal("headerBarTabColor"),bd2aa36c:e(u).getColorVal("headerBarHoverBackground")}));const{t}=ye.useI18n(),o=We(),u=E(),i=Me(),s=Se(),g=_e(),d=K({isFullScreen:!1,currentNavMenu:"",showLayoutDrawer:!1,showAdminInfoPopover:!1}),r=(M,_)=>{d.currentNavMenu=M?_:""},v=M=>{var _;M=="cancel"&&((_=g.value)==null||_.hide())},y=()=>{if(!pe.isEnabled)return dt.warning(t("layouts.Full screen is not supported")),!1;pe.toggle(),pe.onchange(()=>{d.isFullScreen=pe.isFullscreen})},m=()=>{d.showAdminInfoPopover=!1,ve({name:"routine/adminInfo"})},a=()=>{kt().then(()=>{oe.remove(xe),Ke.go(0)})},b=M=>{if(M=="storage"||M=="all"){const _=oe.get(xe),V=oe.get(ze);if(ae.clear(),oe.clear(),oe.set(xe,_),oe.set(ze,V),M=="storage")return}nt(M).then(()=>{})};return(M,_)=>{const V=p("el-button"),L=p("Icon"),G=p("el-popover"),P=p("router-link"),q=p("el-dropdown-item"),Q=p("el-dropdown-menu"),te=p("el-dropdown"),h=p("el-badge"),B=p("el-avatar");return c(),R("div",{class:N(["nav-menus",e(u).layout.layoutMode])},[e(Le).dirtyFile?(c(),x(G,{key:0,ref_key:"reloadHotServerPopover",ref:g,onShow:_[2]||(_[2]=S=>r(!0,"reloadHotServer")),onHide:_[3]||(_[3]=S=>r(!1,"reloadHotServer")),width:360},{reference:n(()=>[f("div",{class:N(["nav-menu-item",d.currentNavMenu=="reloadHotServer"?"hover":""])},[l(L,{color:"var(--el-color-danger)",class:"nav-menu-icon",name:"el-icon-Warning",size:"18"})],2)]),default:n(()=>[f("div",null,[f("div",lo,w(e(t)("vite.Reload hot server title")),1),f("div",ao,[f("p",null,[f("span",null,w(e(t)("vite.Reload hot server tips 1")),1),f("span",null,"【"+w(e(t)(`vite.Close type ${e(Le).closeType}`))+"】",1),f("span",null,w(e(t)("vite.Reload hot server tips 2")),1)]),f("p",null,w(e(t)("vite.Reload hot server tips 3")),1),f("div",no,[l(V,{onClick:_[0]||(_[0]=S=>v("cancel"))},{default:n(()=>[A(w(e(t)("vite.Later")),1)]),_:1}),l(V,{onClick:_[1]||(_[1]=S=>v("reload")),type:"primary"},{default:n(()=>[A(w(e(t)("vite.Restart hot update")),1)]),_:1})])])])]),_:1},512)):$("",!0),l(P,{class:"h100",target:"_blank",title:e(t)("Home"),to:"/"},{default:n(()=>[f("div",so,[l(L,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Monitor",size:"18"},null,8,["color"])])]),_:1},8,["title"]),l(te,{onVisibleChange:_[4]||(_[4]=S=>r(S,"lang")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:n(()=>[l(Q,{class:"dropdown-menu-box"},{default:n(()=>[(c(!0),R(W,null,se(e(u).lang.langArray,S=>(c(),x(q,{key:S.name,onClick:D=>e(at)(S.name)},{default:n(()=>[A(w(S.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:n(()=>[f("div",{class:N(["nav-menu-item pt2",d.currentNavMenu=="lang"?"hover":""])},[l(L,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-lang",size:"18"},null,8,["color"])],2)]),_:1}),f("div",{onClick:y,class:N(["nav-menu-item",d.isFullScreen?"hover":""])},[d.isFullScreen?(c(),x(L,{key:0,color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-full-screen-cancel",size:"18"},null,8,["color"])):(c(),x(L,{key:1,color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-FullScreen",size:"18"},null,8,["color"]))],2),e(o).super?(c(),R("div",{key:1,onClick:_[5]||(_[5]=S=>e(i).toggle()),class:"nav-menu-item pt2"},[l(h,{"is-dot":e(i).state.showDot},{default:n(()=>[l(L,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-terminal",size:"26"},null,8,["color"])]),_:1},8,["is-dot"])])):$("",!0),e(o).super?(c(),x(te,{key:2,onVisibleChange:_[9]||(_[9]=S=>r(S,"clear")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:n(()=>[l(Q,{class:"dropdown-menu-box"},{default:n(()=>[l(q,{onClick:_[6]||(_[6]=S=>b("tp"))},{default:n(()=>[A(w(e(t)("utils.Clean up system cache")),1)]),_:1}),l(q,{onClick:_[7]||(_[7]=S=>b("storage"))},{default:n(()=>[A(w(e(t)("utils.Clean up browser cache")),1)]),_:1}),l(q,{onClick:_[8]||(_[8]=S=>b("all")),divided:""},{default:n(()=>[A(w(e(t)("utils.Clean up all cache")),1)]),_:1})]),_:1})]),default:n(()=>[f("div",{class:N(["nav-menu-item",d.currentNavMenu=="clear"?"hover":""])},[l(L,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Delete",size:"18"},null,8,["color"])],2)]),_:1})):$("",!0),e(s).userInitialize?(c(),x(G,{key:3,onShow:_[10]||(_[10]=S=>r(!0,"adminInfo")),onHide:_[11]||(_[11]=S=>r(!1,"adminInfo")),placement:"bottom-end","hide-after":0,width:260,trigger:"click","popper-class":"admin-info-box",visible:d.showAdminInfoPopover,"onUpdate:visible":_[12]||(_[12]=S=>d.showAdminInfoPopover=S)},{reference:n(()=>[f("div",{class:N(["admin-info",d.currentNavMenu=="adminInfo"?"hover":""])},[l(B,{size:25,src:e(Fe)(e(o).avatar)},null,8,["src"]),f("div",ro,w(e(o).nickname),1)],2)]),default:n(()=>[f("div",null,[f("div",uo,[l(B,{size:70,src:e(Fe)(e(o).avatar)},null,8,["src"]),f("div",co,[f("div",io,w(e(o).nickname),1),f("div",mo,w(e(o).last_login_time),1)])]),f("div",fo,[l(V,{onClick:m,type:"primary",plain:""},{default:n(()=>[A(w(e(t)("layouts.personal data")),1)]),_:1}),l(V,{onClick:a,type:"danger",plain:""},{default:n(()=>[A(w(e(t)("layouts.cancellation")),1)]),_:1})])])]),_:1},8,["visible"])):$("",!0),f("div",{onClick:_[13]||(_[13]=S=>e(u).setLayout("showDrawer",!0)),class:"nav-menu-item"},[l(L,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"fa fa-cogs",size:"18"},null,8,["color"])]),l(Yt),l(oo)],2)}}}),he=z(po,[["__scopeId","data-v-a5a7d96a"]]),_o={class:"nav-bar"},vo=I({__name:"default",setup(T){j(o=>({"67abd059":e(t).getColorVal("headerBarTabColor"),f0bff19a:e(t).getColorVal("headerBarTabActiveColor"),"00d66b4c":e(t).getColorVal("headerBarTabActiveBackground")}));const t=E();return(o,u)=>(c(),R("div",_o,[l(Qe,{ref_key:"layoutNavTabsRef",ref:je},null,512),l(he)]))}}),yo=z(vo,[["__scopeId","data-v-528ceb49"]]),go={class:"nav-bar"},bo={key:0,class:"unfold"},ho=I({__name:"classic",setup(T){j(u=>({"737cd666":e(t).getColorVal("headerBarBackground"),"0af9a26d":e(t).getColorVal("headerBarTabColor"),"88760b72":e(t).getColorVal("headerBarTabActiveColor"),"7cfea179":e(t).getColorVal("headerBarHoverBackground"),e21b7690:e(t).getColorVal("headerBarTabActiveBackground")}));const t=E(),o=()=>{gt("ba-aside-menu-shade",()=>{t.setLayout("menuCollapse",!0)}),t.setLayout("menuCollapse",!1)};return(u,i)=>{const s=p("Icon");return c(),R("div",go,[e(t).layout.shrink&&e(t).layout.menuCollapse?(c(),R("div",bo,[l(s,{onClick:o,name:"fa fa-indent",color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["color"])])):$("",!0),e(t).layout.shrink?$("",!0):(c(),x(Qe,{key:1,ref_key:"layoutNavTabsRef",ref:je},null,512)),l(he)])}}}),Co=z(ho,[["__scopeId","data-v-952ef580"]]),ko={class:"layouts-menu-horizontal"},wo={key:0,class:"menu-horizontal-logo"},xo=I({__name:"menuHorizontal",setup(T){j(d=>({"4dc345d5":e(t).getColorVal("headerBarHoverBackground"),"4bf8e79e":e(t).getColorVal("menuBackground"),"13719fa1":e(t).getColorVal("menuColor"),d3617f0a:e(t).getColorVal("menuActiveColor"),f2c081f8:e(t).getColorVal("menuActiveBackground")}));const t=E(),o=H(),u=le(),i=K({defaultActive:""}),s=d=>{const r=o.getTabsViewDataByRoute(d);r&&(i.defaultActive=ee(r,r.meta.matched))},g=()=>{Y(()=>{var r;let d=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!d)return!1;(r=X.value)==null||r.setScrollTop(d.offsetTop)})};return J(()=>{s(u),g(),new Be(X.value.wrapRef)}),ie(d=>{s(d)}),(d,r)=>{const v=p("el-menu"),y=p("el-scrollbar");return c(),R("div",ko,[e(t).layout.menuShowTopBar?(c(),R("div",wo,[l(Ze)])):$("",!0),l(y,{ref_key:"layoutMenuScrollbarRef",ref:X,class:"horizontal-menus-scrollbar"},{default:n(()=>[l(v,{ref_key:"layoutMenuRef",ref:ge,class:"menu-horizontal",mode:"horizontal","default-active":i.defaultActive},{default:n(()=>[l(be,{extends:{position:"horizontal",level:1},menus:e(o).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["default-active"])]),_:1},512),l(he)])}}}),To=z(xo,[["__scopeId","data-v-851fe78f"]]),So={class:"layouts-menu-horizontal-double"},Bo=I({__name:"double",setup(T){j(d=>({"20aa761e":e(t).getColorVal("menuBackground"),"04a10121":e(t).getColorVal("menuColor"),"57cf81fb":e(t).getColorVal("menuActiveColor"),"7a8c6d84":e(t).getColorVal("menuActiveBackground")}));const t=E(),o=H(),u=le(),i=K({defaultActive:""}),s=d=>{const r=o.getTabsViewDataByRoute(d);r&&(i.defaultActive=ee(r,r.meta.matched))},g=()=>{Y(()=>{var r;let d=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!d)return!1;(r=X.value)==null||r.setScrollTop(d.offsetTop)})};return J(()=>{s(u),g()}),ie(d=>{s(d)}),(d,r)=>{const v=p("el-menu"),y=p("el-scrollbar");return c(),R("div",So,[l(y,{ref_key:"layoutMenuScrollbarRef",ref:X,class:"double-menus-scrollbar"},{default:n(()=>[l(v,{ref_key:"layoutMenuRef",ref:ge,class:"menu-horizontal",mode:"horizontal","default-active":i.defaultActive},{default:n(()=>[l(be,{extends:{position:"horizontal",level:1},menus:e(o).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["default-active"])]),_:1},512),l(he)])}}}),Mo=z(Bo,[["__scopeId","data-v-2e8c780c"]]),Ro=I({name:"layout/header",components:{DefaultNavBar:yo,ClassicNavBar:Co,StreamlineNavBar:To,DoubleNavBar:Mo},__name:"header",setup(T){const t=E(),o=H();return(u,i)=>{const s=p("el-header");return e(o).state.tabFullScreen?$("",!0):(c(),x(s,{key:0,class:"layout-header"},{default:n(()=>[(c(),x($e(e(t).layout.layoutMode+"NavBar")))]),_:1}))}}}),Ce=z(Ro,[["__scopeId","data-v-9014eea9"]]),Vo=I({name:"layout/main",__name:"main",setup(T){const{proxy:t}=Ge(),o=le(),u=E(),i=H(),s=K({componentKey:o.fullPath,keepAliveComponentNameList:[]}),g=function(r){if(r){if(s.keepAliveComponentNameList.find(y=>y===r))return;s.keepAliveComponentNameList.push(r)}},d=()=>{var r;if(i.state.activeRoute){const v=i.getTabsViewDataByRoute(i.state.activeRoute);v&&typeof((r=v.meta)==null?void 0:r.keepalive)=="string"&&g(v.meta.keepalive)}};return Je(()=>{t.eventBus.on("onTabViewRefresh",r=>{s.keepAliveComponentNameList=s.keepAliveComponentNameList.filter(v=>r.meta.keepalive!==v),s.componentKey="",Y(()=>{s.componentKey=r.fullPath,g(r.meta.keepalive)})}),t.eventBus.on("onTabViewClose",r=>{s.keepAliveComponentNameList=s.keepAliveComponentNameList.filter(v=>r.meta.keepalive!==v)})}),mt(()=>{t.eventBus.off("onTabViewRefresh"),t.eventBus.off("onTabViewClose")}),J(()=>{d()}),ft(()=>o.fullPath,()=>{s.componentKey=o.fullPath,d()}),(r,v)=>{const y=p("router-view"),m=p("el-scrollbar"),a=p("el-main");return c(),x(a,{class:"layout-main"},{default:n(()=>[l(m,{class:"layout-main-scrollbar",style:ne(e(st)),ref_key:"layoutMainScrollbarRef",ref:rt},{default:n(()=>[l(y,null,{default:n(({Component:b})=>[l(Ve,{name:e(u).layout.mainAnimation,mode:"out-in"},{default:n(()=>[(c(),x(pt,{include:s.keepAliveComponentNameList},[(c(),x($e(b),{key:s.componentKey}))],1032,["include"]))]),_:2},1032,["name"])]),_:1})]),_:1},8,["style"])]),_:1})}}}),ke=z(Vo,[["__scopeId","data-v-93dd102f"]]),$o=["title"],Ao=I({__name:"closeFullScreen",setup(T){const t=H(),o=K({closeBoxTop:20});J(()=>{setTimeout(()=>{o.closeBoxTop=-30},300)});const u=()=>{o.closeBoxTop=20},i=()=>{o.closeBoxTop=-30},s=()=>{t.setFullScreen(!1)};return(g,d)=>{const r=p("Icon");return c(),R("div",{title:g.$t("layouts.Exit full screen"),onMouseover:ue(u,["stop"]),onMouseout:ue(i,["stop"])},[f("div",{onClick:ue(s,["stop"]),class:"close-full-screen",style:ne({top:o.closeBoxTop+"px"})},[l(r,{name:"el-icon-Close"})],4),d[0]||(d[0]=f("div",{class:"close-full-screen-on"},null,-1))],40,$o)}}}),we=z(Ao,[["__scopeId","data-v-0aa634f1"]]),Io=I({__name:"default",setup(T){const t=H();return(o,u)=>{const i=p("el-container");return c(),R(W,null,[l(i,{class:"layout-container"},{default:n(()=>[l(Ie),l(i,{class:"content-wrapper"},{default:n(()=>[l(Ce),l(ke)]),_:1})]),_:1}),e(t).state.tabFullScreen?(c(),x(we,{key:0})):$("",!0)],64)}}}),Lo=z(Io,[["__scopeId","data-v-59d252c1"]]),Fo=I({__name:"classic",setup(T){const t=H();return(o,u)=>{const i=p("el-container");return c(),R(W,null,[l(i,{class:"layout-container"},{default:n(()=>[l(Ie),l(i,{class:"content-wrapper"},{default:n(()=>[l(Ce),l(ke)]),_:1})]),_:1}),e(t).state.tabFullScreen?(c(),x(we,{key:0})):$("",!0)],64)}}}),zo=z(Fo,[["__scopeId","data-v-fb349671"]]),Do=I({__name:"streamline",setup(T){const t=H();return(o,u)=>{const i=p("el-container");return c(),R(W,null,[l(i,{class:"layout-container"},{default:n(()=>[l(i,{class:"content-wrapper"},{default:n(()=>[l(Ce),l(ke)]),_:1})]),_:1}),e(t).state.tabFullScreen?(c(),x(we,{key:0})):$("",!0)],64)}}}),Po=z(Do,[["__scopeId","data-v-fcdc1bd3"]]),No=I({__name:"double",setup(T){const t=H();return(o,u)=>{const i=p("el-container");return c(),R(W,null,[l(i,{class:"layout-container"},{default:n(()=>[l(Ie),l(i,{class:"content-wrapper"},{default:n(()=>[l(Ce),l(ke)]),_:1})]),_:1}),e(t).state.tabFullScreen?(c(),x(we,{key:0})):$("",!0)],64)}}}),Eo=z(No,[["__scopeId","data-v-d08319bd"]]),Zo=I({components:{Default:Lo,Classic:zo,Streamline:Po,Double:Eo},__name:"index",setup(T){const t=Me(),o=H(),u=E(),i=le(),s=Se(),g=We(),d=K({autoMenuCollapseLock:!1});J(()=>{if(!g.token)return Ke.push({name:"adminLogin"});r(),Te(),re(window,"resize",Te)}),Je(()=>{v(),re(window,"resize",v)});const r=()=>{wt().then(y=>{if(s.dataFill(y.data.siteConfig),t.changePackageManager(y.data.terminal.npmPackageManager),t.changePHPDevelopmentServer(y.data.terminal.phpDevelopmentServer),s.setInitialize(!0),Ee(y.data.adminInfo)||(g.dataFill(y.data.adminInfo),s.setUserInitialize(!0)),y.data.menus){if(bt(y.data.menus),i.params.to){const a=JSON.parse(i.params.to);if(a.path!=Oe){let b=Ee(a.query)?{}:a.query;ve({path:a.path,query:b});return}}let m=Ae(o.state.tabsViewRoutes);m&&ve(m.path)}})},v=()=>{let y={layoutMode:u.layout.layoutMode,menuCollapse:u.layout.menuCollapse},m=ae.get(ce);if(m||ae.set(ce,y),document.body.clientWidth<1024)d.autoMenuCollapseLock||(d.autoMenuCollapseLock=!0,u.setLayout("menuCollapse",!0)),u.setLayout("shrink",!0),u.setLayoutMode("Classic");else{d.autoMenuCollapseLock=!1;let b=m||y;u.setLayout("menuCollapse",b.menuCollapse),u.setLayout("shrink",!1),u.setLayoutMode(b.layoutMode)}};return(y,m)=>(c(),x($e(e(u).layout.layoutMode)))}});export{Zo as default};
